<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Test CORS Middleware</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
    </head>
    <body>
        <div id="response"></div>
        <button type="button" id="btn_1">Check CORS 1</button>
        <button type="button" id="btn_2">Check CORS 2</button>
        <button type="button" id="btn_3">Check CORS 3</button>
    </body>
</html>

<script>
    $("#btn_1").click(function() {
        fetch('http://127.0.0.1:8080/')
        .then((response) => {
            return response.json();
        })
        .then((data) => {
            $("#response").html(data);
            console.log(data);
        });
    });

    $("#btn_2").click(function() {
        fetch('http://127.0.0.1:8080/test-cors')
        .then((response) => {
            return response.json();
        })
        .then((data) => {
            $("#response").html(data);
            console.log(data);
        })
        .catch(err => {
           console.log('caught it!',err);
        });
    });

    $("#btn_3").click(function() {
        fetch('http://127.0.0.1:8080/test-cors-3', {
            headers: {
              'Custom-Header': 'somevaluehere'
            }
        })
        .then((response) => {
            return response.json();
        })
        .then((data) => {
            $("#response").html(data);
            console.log(data);
        })
        .catch(err => {
           console.log('caught it!',err);
        });
    });
</script>